# Tickets category prediction
Итоговый проект по курсу "Машинное обучение в бизнесе"

Стек:

- ML: sklearn, pandas, numpy
- API: Flask

Данные: модель обучалась на реальных данных ИТ-компании, выложить их в общий доступ не могу, т.к. они могут содержать комментческую тайну. Типовые обращения можно посмотреть в файле preds_request.ipynb

Задача: предсказать категорию заявки в службу ИТ-поддержки по заголовку и содержанию обращения. 

Многоклассовая классификация на 17 категорий:
- 0 недостаточно данных/общая консультация/какая-то дичь
- 1 общая проблема/задача с ПК/ОС/антивирусная проверка/ИБП (не включается, не запускается, создание/перемещение РМ, активация ОС, мышки, мониторы и пр.)
- 2 переферия/печать/сканирование (принтер/сканер/МФУ/плоттер - подключение, проблема печати, настройка, дрова)
- 3 права доступа (к папкам, базам - предоставить/проблема)
- 4 1С (установка, проблемы в работе, обновление, классификатор)
- 5 работа почты пользователей (настройка, проблемы внутри почты, web, настройка на телефоне)
- 6 учетные записи/аккаунты (доменные/почтовые/списки рассылки/1С - создание/информация/блокировка/проблемы со входом/предоставление паролей)
- 7 удаленный доступ (предоставление/проблема)
- 8 сеть (оборудование/интернет/локалка/wi-fi/отсутствие доступа к сетевому оборудованию)
- 9 MS Office (word, excel, power point, access - установка, проблемы, активация)
- 10 сервер (почтовый/терминальный/файловый/web/1C и пр. резервное копирование/восстановление, создание баз, кнопки выключения, чиска кэша, сброс сеансов пользователей, настройка синхронизации)
- 11 телефон/телефония установка, настройка, подключение, переадресация и пр.
- 13 замена/заправка картриджа
- 14 закупки (консультация по покупке/запрос счета  и пр.)
- 15 переезд/инвентаризация/профвыезд
- 16 видеонаблюдение, видеокамеры

Используемые признаки:

- title (text)
- content (text)

Преобразования признаков: tfidf

Модель: SVM

### Для запуска модели необходимо клонировать ветку репозитория
```
$ git clone https://github.com/TrickFF/ML_in_business -b tickets_cat_prediction_model_flask_server
$ cd ML_in_business
```
Загрузить необходимые библиотеки для Python:
```
$ pip install -r requirements.txt
```
Запустить run_server.py в фоновом режиме (загружает модель, преобразует данные и выдает предсказание)
```
$ nohup python run_server.py &
```
либо 
```
$ nohup python3 run_server.py &
```
в зависимости от версии. Далее перейти:
```
$ cd front
```
Запустить run_front_server.py также python/python3 в зависимости от версии (згружает web-сервер для взаимодействия с моделью web-интерфейс)
```
$ nohup python run_front_server.py &
```
Если запускать данные файлы в отдельных окнах консоли, то можно запускать их в обычном, а не фоновом режиме:
```
$ python run_server.py
$ python python run_front_server.py
```
- Далее запустить ноутбук preds_request.ipynb для ознакомления с типовыми обращениями.
- После чего можно открыть браузер и перейти на адрес localhost:8181 или 127.0.0.1:8181. Данный доступ к модель работает только локально на ПК.
Если необходимо предоставить доступ к модели по сети, то в файлах run_server.py и run_front_server.py вместо 127.0.0.1 следует указать IP адрес, по которому модель будет доступна в сети. Заходить на web-интерфейс также необходимо по новому адресу, т.е. IP:8181.

##### Остановка серверов
- Если сервера были запущены в отдельных окнах, то достаточно остановить кажды процесс, нажав CTRL+C и закрыв, соответствующее окно консоли
- Если запуск производился в одном окне в фоновом режиме, то следует:

выполнить команду для получения информации об ID запущенных процессов Python
```
$ ps -ef | grep python
```
далее остановить соотвтетсвующие процессы
```
kill -9 [process_id]
```